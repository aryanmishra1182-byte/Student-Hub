<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Login | Student Hub</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{
    --grad: linear-gradient(135deg,#6a11cb,#2575fc);
    --shadow: 0 4px 18px rgba(0,0,0,0.2);
    --radius: 14px;
}
*{margin:0;padding:0;box-sizing:border-box;font-family:"Segoe UI";}
body{
    height:100vh;display:flex;justify-content:center;align-items:center;
    background:#f4f4ff;
}

.container{
    width:350px;background:white;padding:25px;border-radius:var(--radius);
    box-shadow:var(--shadow);
}

h2{
    text-align:center;margin-bottom:20px;font-weight:800;
    background:var(--grad);-webkit-background-clip:text;
    background-clip:text;color:transparent;
}

.input-box{margin-bottom:15px;position:relative;}
.input-box input{
    width:100%;padding:12px;border-radius:10px;border:1px solid #ccc;
}
.show-btn{
    position:absolute;right:10px;top:50%;transform:translateY(-50%);
    cursor:pointer;
}

.link{margin:5px 0;text-align:right;}
.link a{color:#6a11cb;text-decoration:none;font-weight:bold;}

.btn{
    width:100%;padding:12px;background:var(--grad);color:white;
    border:none;border-radius:10px;cursor:pointer;font-weight:bold;
}

.box{
    display:none;margin-top:20px;background:#f4f4ff;padding:12px;
    border-radius:10px;
}
.box input{
    width:100%;padding:10px;border-radius:10px;border:1px solid #aaa;
    margin-bottom:10px;
}
</style>
</head>

<body>

<div class="container">

<h2>Student Hub Login</h2>

<!-- Login -->
<div id="loginArea">

    <div class="input-box">
        <input id="loginEmail" type="email" placeholder="Email">
    </div>

    <div class="input-box">
        <input id="loginPass" type="password" placeholder="Password">
        <span class="show-btn" id="toggleLoginPass">üëÅ</span>
    </div>

    <div class="link"><a href="#" id="openForgot">Forgot?</a></div>
    <div class="link"><a href="#" id="openSignup">New User?</a></div>

    <button class="btn" id="loginBtn">Login</button>
</div>

<!-- Signup -->
<div class="box" id="signupBox">
    <input id="newName" placeholder="Full Name">
    <input id="newEmail" type="email" placeholder="Email">
    <input id="newPass" type="password" placeholder="Password">
    <button class="btn" id="signupBtn">Create Account</button>
</div>

<!-- Forgot Password -->
<div class="box" id="forgotBox">
    <input id="forgotMail" type="email" placeholder="Your Email">
    <button class="btn" id="resetBtn">Send Reset Link</button>
</div>

</div>

<script>

/* ============ DATABASE STRUCTURE ============
users = {
   "aryan@gmail.com" : {
       name:"Aryan Mishra",
       password:"12345",

       tasks: [...],
       notebooks: {...},
       timetable: {...}
   }
}
================================================ */
let users = JSON.parse(localStorage.getItem("users")) || {};
let currentUser = localStorage.getItem("currentUser");

/* Auto redirect if already logged in */
if(currentUser){
    window.location.href="index.html";
}

/* SHOW/HIDE PASSWORD */
document.getElementById("toggleLoginPass").onclick = function(){
    let p=document.getElementById("loginPass");
    if(p.type==="password"){ p.type="text"; this.innerHTML="üôà"; }
    else{ p.type="password"; this.innerHTML="üëÅ"; }
};

/* OPEN SIGNUP */
document.getElementById("openSignup").onclick=function(e){
    e.preventDefault();
    document.getElementById("signupBox").style.display="block";
    document.getElementById("forgotBox").style.display="none";
};

/* OPEN FORGOT */
document.getElementById("openForgot").onclick=function(e){
    e.preventDefault();
    document.getElementById("forgotBox").style.display="block";
    document.getElementById("signupBox").style.display="none";
};

/* CREATE ACCOUNT */
document.getElementById("signupBtn").onclick=function(){
    let name=document.getElementById("newName").value.trim();
    let email=document.getElementById("newEmail").value.trim();
    let pass=document.getElementById("newPass").value.trim();

    if(name===""||email===""||pass===""){
        alert("Fill all fields");
        return;
    }
    if(users[email]){
        alert("User already exists");
        return;
    }

    // create user object
    users[email]={
        name:name,
        password:pass,
        tasks:[],
        notebooks:{},
        timetable:{}
    };

    localStorage.setItem("users",JSON.stringify(users));
    alert("Account created!");
};

/* LOGIN */
document.getElementById("loginBtn").onclick=function(){
    let email=document.getElementById("loginEmail").value.trim();
    let pass=document.getElementById("loginPass").value.trim();

    if(!users[email]){
        alert("User not found!");
        return;
    }
    if(users[email].password!==pass){
        alert("Incorrect password!");
        return;
    }

    localStorage.setItem("currentUser",email);
    alert("Login successful!");

    window.location.href="index.html";
};

/* FORGOT PASSWORD */
document.getElementById("resetBtn").onclick=function(){
    let mail=document.getElementById("forgotMail").value.trim();
    if(!users[mail]){
        alert("Account not found.");
        return;
    }
    alert("Reset link sent to " + mail);
};
</script>

</body>
</html>
