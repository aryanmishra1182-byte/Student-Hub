<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dashboard | Student Hub</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
/* ROOT VARIABLES */
:root{
    --bg:#e9edff;
    --glass:rgba(255,255,255,0.4);
    --glass-strong:rgba(255,255,255,0.7);
    --grad:linear-gradient(135deg,#6a11cb,#2575fc);
    --grad2:linear-gradient(135deg,#7a1df5,#3d8bff);
    --shadow:0 8px 25px rgba(0,0,0,0.15);
    --radius:22px;
    --radius-sm:14px;

    /* DARK THEME */
    --bg-dark:#0f0f17;
    --glass-dark:rgba(30,30,40,0.6);
    --glass-strong-dark:rgba(60,60,80,0.7);
}

/* RESET */
*{ margin:0; padding:0; box-sizing:border-box; font-family:"Segoe UI",sans-serif; }

/* DARK MODE */
.dark-mode{ background:var(--bg-dark) !important; color:white !important; }
.dark-mode .hero{ background:linear-gradient(135deg,#111,#333) !important; }
.dark-mode .card{ background:var(--glass-dark) !important; border-color:var(--glass-strong-dark); }
.dark-mode .item{ background:#1b1b27 !important; }
.dark-mode .modal{ background:var(--glass-dark) !important; }

/* BODY */
body{
    background:var(--bg);
    height:100vh;
    display:flex;
    flex-direction:column;
}

/* HEADER */
.hero{
    padding:25px 40px;
    background:var(--grad);
    color:white;
    border-bottom-left-radius:30px;
    border-bottom-right-radius:30px;
    box-shadow:var(--shadow);
    position:relative;
}

.top-right{
    position:absolute;
    right:40px; top:25px;
    display:flex; gap:20px;
}

.toggle-btn, .account-btn{
    background:white;
    padding:8px 16px;
    border-radius:20px;
    cursor:pointer;
    font-weight:700;
    box-shadow:var(--shadow);
    color:#333;
}

/* ACCOUNT MENU */
.account{
    position:relative;
    z-index:9999;
}
.account-menu{
    position:absolute;
    right:0;
    top:45px;
    width:150px;
    padding:12px;
    background:white;
    border-radius:14px;
    box-shadow:var(--shadow);
    display:none;
    z-index:99999;
}
.account-menu a{
    display:block;
    padding:8px;
    text-decoration:none;
    color:#333;
    border-radius:10px;
}
.account-menu a:hover{ background:#ececff; }

/* MAIN LAYOUT */
.container{
    flex:1;
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:25px;
    padding:25px 35px;
}

/* FIXED CARD */
.card{
    background:var(--glass);
    border:1px solid var(--glass-strong);
    border-radius:var(--radius);
    padding:18px 20px;
    box-shadow:var(--shadow);
    backdrop-filter:blur(12px);
    display:flex;
    flex-direction:column;
}

.scroll-box{
    margin-top:12px;
    flex:1;
    overflow-y:auto;
    max-height:100%;
}

/* ITEM */
.item{
    background:white;
    padding:12px;
    margin-bottom:12px;
    border-radius:var(--radius-sm);
    border-left:5px solid #6a11cb;
    box-shadow:0 4px 12px rgba(0,0,0,0.1);
}

/* LINKS */
.links{
    display:flex;
    justify-content:center;
    gap:25px;
    padding:20px;
}

.links a{
    padding:14px 28px;
    background:var(--grad);
    color:white;
    text-decoration:none;
    border-radius:50px;
    font-weight:600;
    font-size:15px;
    box-shadow:0 8px 18px rgba(0,0,0,0.15);
    transition:all 0.25s ease-in-out;
    display:flex;
    align-items:center;
    gap:8px;
    backdrop-filter:blur(8px);
}

.links a:hover{
    transform:translateY(-3px) scale(1.05);
    box-shadow:0 12px 25px rgba(0,0,0,0.25);
    letter-spacing:0.5px;
    background:var(--grad2);
}

.links a:active{
    transform:scale(0.97);
}

/* ‚≠ê UPDATED FOOTER WITH ICONS */
.footer{
    background:white;
    padding:15px;
    display:flex;
    justify-content:center;
    gap:35px;
    border-radius:20px 20px 0 0;
}

.footer a{
    font-weight:600;
    font-size:15px;
    color:#333;
    text-decoration:none;
    display:flex;
    align-items:center;
    gap:6px;
}

.footer a:hover{
    text-decoration:underline;
}

/* POPUPS */
.overlay{
    position:fixed;
    top:0; left:0;
    width:100%; height:100%;
    background:rgba(0,0,0,0.55);
    display:none;
    justify-content:center;
    align-items:center;
    z-index:999999;
}
.modal{
    width:350px;
    padding:25px;
    background:white;
    border-radius:22px;
    text-align:center;
    box-shadow:var(--shadow);
    animation:pop 0.3s ease;
}
@keyframes pop{
    from{ transform:scale(0.7); opacity:0; }
    to{ transform:scale(1); opacity:1; }
}
.modal button{
    padding:10px 18px;
    background:var(--grad);
    color:white;
    border:none;
    border-radius:14px;
    margin-top:15px;
    cursor:pointer;
}
</style>
</head>

<body>

<!-- HEADER -->
<div class="hero">
    <h1>Welcome, <span id="username"></span> üëã</h1>
    <small>Your productivity hub at a glance.</small>

    <div class="top-right">
        <div class="toggle-btn" onclick="toggleDark()">üåô Dark Mode</div>

        <div class="account">
            <div class="account-btn" onclick="toggleMenu()">üë§ Account</div>
            <div class="account-menu" id="accMenu">
                <a onclick="openProfile()">Profile</a>
                <a onclick="openSettings()">Settings</a>
                <a onclick="logout()">Logout</a>
            </div>
        </div>
    </div>
</div>

<!-- MAIN CARDS -->
<div class="container">
    <div class="card">
        <h3>üìÖ Today‚Äôs Classes</h3>
        <div id="timeData" class="scroll-box"></div>
    </div>

    <div class="card">
        <h3>üìù Today‚Äôs Tasks</h3>
        <div id="taskData" class="scroll-box"></div>
    </div>
</div>

<!-- LINKS -->
<div class="links">
    <a href="notebook.html">üìö Notebook</a>
    <a href="tasks.html">üìù Tasks</a>
    <a href="timetable.html">üìÖ Timetable</a>
</div>

<!-- ‚≠ê UPDATED FOOTER WITH ICONS -->
<div class="footer">
    <a href="#"><span style="font-size:20px;">üü¢</span> WhatsApp</a>
    <a href="#"><span style="font-size:20px;">üì∏</span> Instagram</a>
    <a href="#"><span style="font-size:20px;">üéß</span> Support</a>
</div>

<!-- PROFILE POPUP -->
<div class="overlay" id="profilePopup">
    <div class="modal">
        <h2>üë§ Your Profile</h2>
        <p><b>Name:</b> <span id="pName"></span></p>
        <p><b>Email:</b> <span id="pEmail"></span></p>
        <p><b>Branch:</b> CSE (Data Science)</p>
        <button onclick="closeProfile()">Close</button>
    </div>
</div>

<!-- SETTINGS POPUP -->
<div class="overlay" id="settingsPopup">
    <div class="modal">
        <h2>‚öô Settings</h2>
        <p>‚Ä¢ Dark Mode</p>
        <p>‚Ä¢ App Version 1.0</p>
        <p>‚Ä¢ Account Security</p>
        <button onclick="closeSettings()">Close</button>
    </div>
</div>

<script>
/* USER DATA */
let users = JSON.parse(localStorage.getItem("users")) || {};
let currentUser = localStorage.getItem("currentUser");

document.getElementById("username").innerText =
    users[currentUser]?.name || "User";

/* POPUP FUNCTIONS */
function openProfile(){
    document.getElementById("pName").innerText = users[currentUser]?.name;
    document.getElementById("pEmail").innerText = users[currentUser]?.email || "Not set";
    document.getElementById("profilePopup").style.display="flex";
}
function closeProfile(){ document.getElementById("profilePopup").style.display="none"; }

function openSettings(){ document.getElementById("settingsPopup").style.display="flex"; }
function closeSettings(){ document.getElementById("settingsPopup").style.display="none"; }

/* DARK MODE */
function toggleDark(){ document.body.classList.toggle("dark-mode"); }

/* ACCOUNT MENU */
function toggleMenu(){
    let m=document.getElementById("accMenu");
    m.style.display=(m.style.display==="block")?"none":"block";
}

/* LOGOUT */
function logout(){
    localStorage.removeItem("currentUser");
    window.location.href="login.html";
}

/* LOAD TASKS + CLASSES */
let daywise = JSON.parse(localStorage.getItem("dayTimetable")) || {};
let tasks = JSON.parse(localStorage.getItem("tasks")) || [];

let today = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]
[new Date().getDay()];

function loadTodayClasses(){
    let box=document.getElementById("timeData");
    let list = daywise[today] || [];

    if(list.length===0){
        box.innerHTML=`<div class="item">No classes today.</div>`;
        return;
    }

    box.innerHTML="";
    list.forEach(c=>{
        box.innerHTML += `<div class="item"><b>${c.time}</b> ‚Äî ${c.text}</div>`;
    });
}

function loadTodayTasks(){
    let box=document.getElementById("taskData");
    let pending = tasks.filter(t=>!t.done);

    if(pending.length===0){
        box.innerHTML=`<div class="item">All tasks completed!</div>`;
        return;
    }

    box.innerHTML="";
    pending.forEach(t=>{
        box.innerHTML += `<div class="item">${t.text}</div>`;
    });
}

loadTodayClasses();
loadTodayTasks();
</script>

</body>
</html>
